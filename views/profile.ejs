<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사용자 프로필</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/public/css/profile.css">
</head>

<body>
    <div class="header">
        <div class="header-content">
            <div class="header-title">
                사용자 프로필
            </div>
            <div class="profile-edit-button">
                <i class="fas fa-cog" alt="프로필 수정"></i>
            </div>
        </div>
    </div>

    <!-- 중앙 사용자 정보 섹션 -->
    <div class="user-info">
        <!-- 좌측 프로필 사진 및 닉네임 -->
        <div class="left-section">
            <div class="profile-picture">
                <img src="" alt="프로필 사진">
            </div>
            <div class="user-nickname">
                <h1>
                    <%= user.nickname %>
                </h1>
            </div>
        </div>
        <!-- 우측 사용자 정보 -->
        <div class="right-section">
            <p>ID: <%= user.login_id %>
            </p>
            <p>나이: <%= age %>
            </p>
            <p>성별: <%= user.gender %>
            </p>
            <p>생년월일: <%= user.birth %>
            </p>
            <p>이메일: <%= user.email %>
            </p>
        </div>
    </div>

    <div class="friend-info">
        <!-- 친구 수 및 버튼 -->
        <p class="friend-count">친구 수: <%= friendCount %>
        </p>
        <button><i class="fas fa-plus"></i> 게시물 작성</button>
    </div>

    <div class="bottom-section">
        <div class="categories-container">
            <!-- 채팅방 목록 -->
            <button class="category-button">내 채팅방</button>
            <div id="chatRoomsList" class="category-list">
                <!-- 내가 개설한 채팅방 목록 -->
                <ul>
                    <li class="category-title">내가 개설한 채팅방</li>
                    <% if (posterChatRooms.length === 0) { %>
                    <li class="empty-message">내가 개설한 방이 없어요</li>
                    <% } else { %>
                    <% posterChatRooms.forEach(function(room) { %>
                    <li>
                        <a href="/chat/<%= room.id %>">
                            <%= room.title %> (<%= room.unreadMessages %> 안 읽은 메시지)
                            <% if (room.latestUnreadMessage) { %>
                            <span class="latest-message">
                                <%= room.latestUnreadMessage.message %>
                            </span>
                            <% } %>
                        </a>
                    </li>
                    <% }); %>
                    <% } %>
                </ul>
                <!-- 내가 참여한 채팅방 목록 -->
                <ul>
                    <li class="category-title">내가 참여한 채팅방</li>
                    <!-- 내가 참여한 채팅방 목록 내용... -->
                    <% if (userChatRooms.length === 0) { %>
                    <li class="empty-message">내가 참여한 방이 없어요</li>
                    <% } else { %>
                    <% userChatRooms.forEach(function(room) { %>
                    <li>
                        <a href="/chat/<%= room.id %>">
                            <%= room.title %> (<%= room.unreadMessages %> 안 읽은 메시지)
                            <% if (room.latestUnreadMessage) { %>
                            <span class="latest-message">
                                <%= room.latestUnreadMessage.message %>
                            </span>
                            <% } %>
                        </a>
                    </li>
                    <% }); %>
                    <% } %>
                </ul>
            </div>

            <!-- 북마크한 게시물 목록 -->
            <button class="category-button">북마크한 게시물</button>
            <div id="bookmarkedBoardsList" class="category-list">
                <!-- 북마크한 게시물 목록 내용... -->
                <ul>
                    <% if (bookmarkedBoards.length === 0) { %>
                    <li>북마크한 게시물이 없어요</li>
                    <% } else { %>
                    <% bookmarkedBoards.forEach(function(board) { %>
                    <% if (board && board.id) { %>
                    <li><a href="/board/<%= board.id %>">
                            <%= board.title %>
                        </a></li>
                    <% } %>
                    <% }); %>
                    <% } %>
                </ul>
            </div>

            <!-- 일정 목록 -->
            <button class="category-button">일정</button>
            <div id="schedulesList" class="category-list">
                <!-- 일정 목록 내용... -->
                <ul>
                    <% schedules.forEach(function(schedule) { %>
                    <li>
                        <%= schedule.title %>: <%= schedule.date %>
                    </li>
                    <% }); %>
                </ul>
            </div>
        </div>
    </div>
    <script src="/public/js/profile.js"></script>
</body>

</html>